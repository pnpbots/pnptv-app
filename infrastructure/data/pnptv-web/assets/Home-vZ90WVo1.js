import{u as h,j as e}from"./index-Cn0k-BHZ.js";import{u as p,L as u}from"./vendor-DD6IjSBT.js";import{u as n,D as o}from"./useDirectus-CY-75GOS.js";import"./auth-BkcVUzVN.js";function f(t){if(!t)return"";const l=Date.now()-new Date(t).getTime(),i=Math.floor(l/6e4);if(i<60)return`${i}m`;const r=Math.floor(i/60);return r<24?`${r}h`:`${Math.floor(r/24)}d`}function w(){const{user:t}=h(),l=p(),{data:i}=n({collection:"announcements",params:{filter:{status:{_eq:"published"}},sort:["-is_pinned","-published_at"],limit:5}}),{data:r}=n({collection:"performers",params:{filter:{status:{_eq:"published"},is_featured:{_eq:!0}},limit:6}}),{data:d,isLoading:m}=n({collection:"social_posts",params:{sort:["-date_created"],limit:10,fields:["*","media.id","media.type","media.width","media.height"],filter:{status:{_eq:"published"}}}}),x=(t==null?void 0:t.username)||(t==null?void 0:t.displayName)||"user",c=(t==null?void 0:t.subscriptionType)||"free";return e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"glass-card p-6 mb-6 animate-fade-in-up",children:[e.jsxs("h1",{className:"text-xl font-bold text-white",children:["High ",e.jsx("span",{role:"img","aria-label":"wind",children:"ðŸŒ¬ï¸"})," ",e.jsxs("span",{style:{color:"#D4007A"},children:["@",x]})]}),e.jsx("p",{className:"text-sm mt-2",style:{color:"#8E8E93"},children:"PNP Content. Live Video Rooms. Raw Podcasts."}),e.jsxs("p",{className:"text-sm mt-1",style:{color:"#8E8E93"},children:["You are a"," ",e.jsx("span",{className:"font-semibold text-white capitalize",children:c})," ","member."]})]}),i.length>0&&e.jsx("div",{className:"mb-6 space-y-3",children:i.map(s=>e.jsx("div",{className:"glass-card-sm p-4 border-l-4",style:{borderLeftColor:s.type==="news"?"#FFB454":s.type==="event"?"#D4007A":"#30D158"},children:e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.is_pinned&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-pnp-accent/20 text-pnp-accent font-medium",children:"PINNED"}),e.jsx("span",{className:"text-xs uppercase font-medium",style:{color:"#8E8E93"},children:s.type})]}),e.jsx("h3",{className:"text-sm font-semibold text-white",children:s.title}),e.jsx("p",{className:"text-xs mt-1",style:{color:"#8E8E93"},children:s.body})]})})},s.id))}),r.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"Featured"}),e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 -mx-1 px-1 scrollbar-hide",children:r.map(s=>{var a;return e.jsxs("div",{className:"glass-card-sm p-3 flex-shrink-0 w-28 text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-full mx-auto mb-2 flex items-center justify-center text-lg font-bold",style:{background:"rgba(212, 0, 122, 0.2)",color:"#D4007A"},children:s.name[0]}),e.jsx("p",{className:"text-xs font-medium text-white truncate",children:s.name}),((a=s.categories)==null?void 0:a[0])&&e.jsx("p",{className:"text-[10px] mt-0.5 truncate",style:{color:"#8E8E93"},children:s.categories[0]})]},s.id)})})]}),c!=="prime"&&e.jsx("button",{onClick:()=>l("/profile"),className:"btn-gradient w-full py-3 px-6 rounded-xl text-white font-semibold text-sm mb-6 font-display tracking-wider whitespace-nowrap",children:"Subscribe to PNPTv! PRIME"}),e.jsx("div",{className:"glass-card-sm p-4 mb-6 cursor-pointer hover:border-white/20 transition-colors",onClick:()=>l("/social"),children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0",style:{background:"rgba(212, 0, 122, 0.2)",color:"#D4007A"},children:((t==null?void 0:t.displayName)||"U")[0].toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"w-full bg-transparent text-white/40 text-sm py-2 border-b border-white/10 mb-3 cursor-text",children:"What's on your mind?"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",style:{color:"#8E8E93"},children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsx("span",{className:"btn-gradient px-4 py-1.5 rounded-lg text-white text-sm font-semibold",children:"Post"})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Latest posts"}),e.jsx(u,{to:"/social",className:"text-xs font-medium",style:{color:"#FFB454"},children:"View all"})]}),m?e.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((s,a)=>e.jsx("div",{className:"glass-card-sm p-4 animate-pulse",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-3 bg-white/10 rounded w-32"}),e.jsx("div",{className:"h-3 bg-white/10 rounded w-full"}),e.jsx("div",{className:"h-3 bg-white/10 rounded w-3/4"})]})]})},a))}):d.length===0?e.jsxs("div",{className:"glass-card-sm p-8 text-center",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3",style:{color:"#8E8E93"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})}),e.jsx("p",{className:"text-white font-medium mb-1",children:"No posts yet"}),e.jsx("p",{className:"text-sm",style:{color:"#8E8E93"},children:"Content will appear here once members start posting."})]}):e.jsx("div",{className:"space-y-3",children:d.map(s=>{var a;return e.jsx("div",{className:"glass-card-sm p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>s.author_id&&l(s.author_id===(t==null?void 0:t.dbId)?"/profile":`/profile/${s.author_id}`),className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold",style:{background:"rgba(212, 0, 122, 0.2)",color:"#D4007A"},children:(s.author_name||"?")[0].toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>s.author_id&&l(s.author_id===(t==null?void 0:t.dbId)?"/profile":`/profile/${s.author_id}`),className:"font-semibold text-white text-sm truncate hover:underline",children:s.author_name||"Anonymous"}),e.jsxs("span",{className:"text-xs",style:{color:"#8E8E93"},children:["Â· ",f(s.date_created)]})]}),e.jsx("p",{className:"text-sm text-white/90 mt-1.5 whitespace-pre-wrap leading-relaxed",children:s.text}),s.media&&e.jsx("div",{className:"mt-2",children:(a=s.media.type)!=null&&a.startsWith("video/")?e.jsx("video",{src:`${o}/assets/${s.media.id}`,className:"w-full max-h-48 rounded-lg object-cover",muted:!0,preload:"metadata"}):e.jsx("img",{src:`${o}/assets/${s.media.id}?width=400&quality=75`,alt:"",className:"w-full max-h-48 rounded-lg object-cover",loading:"lazy"})})]})]})},s.id)})})]})}export{w as default};
