const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-vZ90WVo1.js","assets/vendor-DD6IjSBT.js","assets/useDirectus-CY-75GOS.js","assets/auth-BkcVUzVN.js","assets/Media-yTwWuH9b.js","assets/Badge-BXfN9DIO.js","assets/Live-CSAafC-b.js","assets/media-BbSaIQh1.js","assets/Booking-Bl3NMbMe.js","assets/Booking-Dgihpmma.css","assets/Chat-VMJit8IR.js","assets/Social-DHbDaPQG.js","assets/Profile-TRmtygiD.js","assets/Dashboard-CjM7l6lx.js","assets/AuthCallback-C6y0bpeD.js"])))=>i.map(i=>d[i]);
import{r as c,a as Y,R as O,N as V,u as J,O as K,c as X,b as Q}from"./vendor-DD6IjSBT.js";import{U as Z,W as ee}from"./auth-BkcVUzVN.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();var H={exports:{}},T={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var te=c,re=Symbol.for("react.element"),ne=Symbol.for("react.fragment"),se=Object.prototype.hasOwnProperty,ae=te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oe={key:!0,ref:!0,__self:!0,__source:!0};function W(t,r,s){var o,n={},a=null,i=null;s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),r.ref!==void 0&&(i=r.ref);for(o in r)se.call(r,o)&&!oe.hasOwnProperty(o)&&(n[o]=r[o]);if(t&&t.defaultProps)for(o in r=t.defaultProps,r)n[o]===void 0&&(n[o]=r[o]);return{$$typeof:re,type:t,key:a,ref:i,props:n,_owner:ae.current}}T.Fragment=ne;T.jsx=W;T.jsxs=W;H.exports=T;var e=H.exports,C={},R=Y;C.createRoot=R.createRoot,C.hydrateRoot=R.hydrateRoot;const ie="https://auth.pnptv.app",ce="pnptv-web",L="https://app.pnptv.app",j=new Z({authority:`${ie}/application/o/pnptv-web/`,client_id:ce,redirect_uri:`${L}/auth/callback`,post_logout_redirect_uri:L,response_type:"code",scope:"openid profile email",userStore:new ee({store:localStorage}),automaticSilentRenew:!0,silent_redirect_uri:`${L}/auth/silent-renew`});async function le(){await j.signinRedirect()}async function Ve(){return j.signinRedirectCallback()}async function de(){await j.signoutRedirect()}async function pe(){return j.getUser()}async function ue(){const t=await j.getUser();return!t||t.expired?null:t.access_token}function P(){var t;return((t=window.Telegram)==null?void 0:t.WebApp)??null}function $(){var t,r;return!!((r=(t=window.Telegram)==null?void 0:t.WebApp)!=null&&r.initData)}const E="https://pnptv.app";async function l(t,r={}){const{method:s="GET",body:o,headers:n={}}=r,a=await fetch(`${E}${t}`,{method:s,credentials:"include",headers:{"Content-Type":"application/json",...n},...o?{body:JSON.stringify(o)}:{}});if(!a.ok){const i=await a.json().catch(()=>({error:a.statusText}));throw new Error(i.error||`API error ${a.status}`)}return a.json()}function I(t){return l("/api/telegram-auth",{method:"POST",body:{initData:t}})}function U(){return l("/api/auth-status")}function me(){return l("/api/accept-terms",{method:"POST"})}function he(){return l("/api/logout",{method:"POST"})}function fe(){return l("/api/verify-age-self",{method:"POST"})}function He(t=0,r=20){return l(`/api/proxy/media/tracks?offset=${t}&limit=${r}`)}function We(t,r=20){return l(`/api/proxy/media/search?q=${encodeURIComponent(t)}&limit=${r}`)}function Ge(t){return l(`/api/proxy/media/stream/${t}`)}function qe(){return l("/api/proxy/live/streams")}async function Ye(t,r){const s=new FormData;s.append("text",t),r&&s.append("media",r);const o=await fetch(`${E}/api/proxy/social/posts`,{method:"POST",credentials:"include",body:s});if(!o.ok){const n=await o.json().catch(()=>({error:o.statusText}));throw new Error(n.error||`API error ${o.status}`)}return o.json()}function Je(t){return l(`/api/proxy/social/posts/${t}`,{method:"DELETE"})}function Ke(t,r,s){return l("/api/webapp/nearby/update-location",{method:"POST",body:{latitude:t,longitude:r,accuracy:s}})}function Xe(t,r,s=5,o=50){return l(`/api/webapp/nearby/search?latitude=${t}&longitude=${r}&radius=${s}&limit=${o}`)}const Qe=[5,10,20,50,100];function Ze(){return l("/api/proxy/live/performers")}function et(t,r,s){return l("/api/proxy/live/tips",{method:"POST",body:{performerId:t,amount:r,message:s}})}function tt(t=10){return l(`/api/proxy/live/tips/recent?limit=${t}`)}function rt(){return l("/api/webapp/profile")}function nt(t){return l("/api/webapp/profile",{method:"PUT",body:t})}async function st(t){const r=new FormData;r.append("avatar",t);const s=await fetch(`${E}/api/webapp/profile/avatar`,{method:"POST",credentials:"include",body:r});if(!s.ok){const o=await s.json().catch(()=>({error:s.statusText}));throw new Error(o.error||`API error ${s.status}`)}return s.json()}function at(t,r,s=20){const o=new URLSearchParams({limit:String(s)});return r&&o.set("cursor",r),l(`/api/webapp/social/profile/${t}?${o}`)}function ot(t,r){if(r){const s=new FormData;return s.append("content",t),s.append("media",r),fetch(`${E}/api/webapp/social/posts/with-media`,{method:"POST",credentials:"include",body:s}).then(async o=>{if(!o.ok){const n=await o.json().catch(()=>({error:o.statusText}));throw new Error(n.error||`API error ${o.status}`)}return o.json()})}return l("/api/webapp/social/posts",{method:"POST",body:{content:t}})}function it(t){return l(`/api/webapp/social/posts/${t}/like`,{method:"POST"})}function ct(t){return l(`/api/webapp/social/posts/${t}`,{method:"DELETE"})}function lt(){return l("/api/webapp/hangouts/groups")}function dt(t,r){return l("/api/webapp/hangouts/groups",{method:"POST",body:{name:t,description:r}})}function pt(t){return l(`/api/webapp/hangouts/groups/${t}/leave`,{method:"POST"})}function ut(t){return l(`/api/webapp/hangouts/groups/${t}`,{method:"DELETE"})}function mt(t,r){return l(`/api/webapp/hangouts/groups/${t}/messages`)}function ht(t,r){return l(`/api/webapp/hangouts/groups/${t}/messages`,{method:"POST",body:{content:r}})}function ft(t){return l(`/api/webapp/hangouts/groups/${t}/call`,{method:"POST"})}const G=c.createContext(null);function S(t){return{id:t.telegram_id,dbId:t.id,username:t.username,firstName:t.first_name,displayName:t.display_name,language:t.language,termsAccepted:t.terms_accepted,ageVerified:t.age_verified,photoUrl:t.photo_url||void 0,subscriptionType:t.subscription_type,role:t.role||"user"}}function D(t){return{id:t.profile.sub,username:t.profile.preferred_username,firstName:t.profile.given_name||t.profile.name||"",displayName:t.profile.name||t.profile.preferred_username||"",language:"en",termsAccepted:!0,ageVerified:!1,subscriptionType:"free",role:t.profile.role||"user"}}function xe({children:t}){const[r,s]=c.useState(null),[o,n]=c.useState(!0),[a,i]=c.useState(null);c.useEffect(()=>{(async()=>{try{if($()){i("telegram");const f=P();if(f!=null&&f.initData){const v=await I(f.initData);v.success&&v.user&&s(S(v.user))}}else{i("oidc");try{const v=await U();if(v.authenticated&&v.user){s(S(v.user)),i("telegram");return}}catch{}const f=await pe();f&&!f.expired&&s(D(f))}}catch{}finally{n(!1)}})();const b=f=>{a==="oidc"&&s(D(f))},k=()=>{a==="oidc"&&s(null)};return j.events.addUserLoaded(b),j.events.addUserUnloaded(k),()=>{j.events.removeUserLoaded(b),j.events.removeUserUnloaded(k)}},[]);const p=c.useCallback(async()=>{if($()){const m=P();if(m!=null&&m.initData){const b=await I(m.initData);b.success&&b.user&&(s(S(b.user)),i("telegram"))}}else await le()},[]),d=c.useCallback(async()=>{a==="telegram"?await he():await de(),s(null)},[a]),h=c.useCallback(async()=>a==="telegram"?null:ue(),[a]),x=c.useCallback(async()=>{try{const m=await U();m.authenticated&&m.user&&s(S(m.user))}catch{}},[]),u=!!r&&(r.role==="admin"||r.role==="superadmin"),y={user:r,isAuthenticated:!!r,isAdmin:u,isLoading:o,mode:a,login:p,logout:d,getToken:h,refreshUser:x};return O.createElement(G.Provider,{value:y},t)}function q(){const t=c.useContext(G);if(!t)throw new Error("useAuth must be used within AuthProvider");return t}const ge="modulepreload",ye=function(t){return"/"+t},M={},w=function(r,s,o){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),p=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.allSettled(s.map(d=>{if(d=ye(d),d in M)return;M[d]=!0;const h=d.endsWith(".css"),x=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${x}`))return;const u=document.createElement("link");if(u.rel=h?"stylesheet":ge,h||(u.as="script"),u.crossOrigin="",u.href=d,p&&u.setAttribute("nonce",p),document.head.appendChild(u),h)return new Promise((y,m)=>{u.addEventListener("load",y),u.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(i){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=i,window.dispatchEvent(p),!p.defaultPrevented)throw i}return n.then(i=>{for(const p of i||[])p.status==="rejected"&&a(p.reason);return r().catch(a)})},be=[{to:"/",label:"Home",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{to:"/chat",label:"Hangouts",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})})},{to:"/media",label:"PRIME",icon:"logo"},{to:"/live",label:"Live",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})},{to:"/booking",label:"Nearby",icon:e.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}];function ve(){return e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-40 glass-nav border-t border-pnp-border safe-area-bottom",children:e.jsx("div",{className:"flex items-center justify-around h-16 max-w-lg mx-auto",children:be.map(t=>e.jsxs(V,{to:t.to,end:t.to==="/",className:({isActive:r})=>`flex flex-col items-center gap-0.5 px-3 py-1 transition-colors ${r?"nav-active":"text-pnp-textSecondary hover:text-pnp-textPrimary"}`,children:[t.icon==="logo"?e.jsx("img",{src:"/logo.png",alt:"PRIME",className:"h-5 w-auto"}):t.icon,e.jsx("span",{className:"text-[10px] font-medium",children:t.label})]},t.to))})})}function je(){const[t,r]=c.useState(null),[s,o]=c.useState(!1);c.useEffect(()=>{const a=P();if(a&&$()){o(!0),a.ready(),a.expand();const i=a.initDataUnsafe.user;i&&r({id:i.id,firstName:i.first_name,lastName:i.last_name,username:i.username,languageCode:i.language_code,photoUrl:i.photo_url})}},[]);const n=P();return{isTelegram:s,user:t,initData:(n==null?void 0:n.initData)??"",platform:(n==null?void 0:n.platform)??"web",colorScheme:(n==null?void 0:n.colorScheme)??"dark",expand:()=>n==null?void 0:n.expand(),haptic:{impact:(a="medium")=>{var i;return(i=n==null?void 0:n.HapticFeedback)==null?void 0:i.impactOccurred(a)},notification:a=>{var i;return(i=n==null?void 0:n.HapticFeedback)==null?void 0:i.notificationOccurred(a)},selection:()=>{var a;return(a=n==null?void 0:n.HapticFeedback)==null?void 0:a.selectionChanged()}}}}const z="https://pnptv.app";function we(){const[t,r]=c.useState(!1),[s,o]=c.useState("idle"),n=c.useRef(null);c.useEffect(()=>()=>{n.current&&clearInterval(n.current)},[]);const a=async()=>{try{o("waiting");const d=await(await fetch(`${z}/api/webapp/auth/telegram/token`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})).json();if(!d.success||!d.token||!d.deepLink){o("error");return}window.open(d.deepLink,"_blank");let h=0;const x=60;n.current=setInterval(async()=>{if(h++,h>x){n.current&&clearInterval(n.current),o("error");return}try{(await(await fetch(`${z}/api/webapp/auth/telegram/check?token=${d.token}`,{credentials:"include"})).json()).authenticated&&(n.current&&clearInterval(n.current),window.location.reload())}catch{}},5e3)}catch{o("error")}},i=()=>{r(!0),setTimeout(()=>r(!1),2e3)};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center px-4 relative overflow-hidden",style:{background:"#121212"},children:[e.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[500px] h-[500px] rounded-full opacity-20 blur-3xl pointer-events-none",style:{background:"radial-gradient(circle, #D4007A, transparent 70%)"}}),e.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[500px] h-[500px] rounded-full opacity-20 blur-3xl pointer-events-none",style:{background:"radial-gradient(circle, #E69138, transparent 70%)"}}),e.jsxs("div",{className:"glass-card neon-glow animate-subtle-glow w-full max-w-md p-8 sm:p-10 relative z-10 animate-fade-in-up",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsx("img",{src:"/logo.png",alt:"PNPTV",className:"h-14 w-auto mx-auto"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:a,disabled:s==="waiting",className:"btn-gradient w-full py-3.5 px-6 rounded-xl text-white font-semibold text-base flex items-center justify-center gap-3 disabled:opacity-60",children:s==="waiting"?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Waiting for Telegram..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.479.33-.913.492-1.302.48-.428-.013-1.252-.242-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})}),"Login with Telegram"]})}),s==="waiting"&&e.jsx("p",{className:"text-center text-xs",style:{color:"#8E8E93"},children:"Open Telegram and press Start to log in"}),s==="error"&&e.jsx("p",{className:"text-center text-xs text-red-400",children:"Login failed. Please try again."}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:i,className:"w-full py-3.5 px-6 rounded-xl font-semibold text-base flex items-center justify-center gap-3 transition-all duration-200 hover:bg-white/10",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.15)",color:"#FFFFFF"},children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"Register with X"]}),t&&e.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 px-4 py-1.5 rounded-lg text-sm font-medium text-white whitespace-nowrap animate-fade-in-up",style:{background:"rgba(30, 30, 30, 0.9)",border:"1px solid rgba(212, 0, 122, 0.4)"},children:"Coming Soon"})]})]}),e.jsx("div",{className:"mt-8 pt-6",style:{borderTop:"1px solid rgba(255, 255, 255, 0.08)"},children:e.jsx("p",{className:"text-center text-xs",style:{color:"#8E8E93"},children:"By continuing, you agree to our Terms of Service"})})]})]})}const Ne=[{to:"/",label:"Home",end:!0},{to:"/chat",label:"Hangouts"},{to:"/media",label:"PRIME"},{to:"/live",label:"Live"},{to:"/booking",label:"Nearby"}];function ke(){const{isAuthenticated:t,user:r,isLoading:s}=q(),{isTelegram:o}=je(),n=J();return!t&&!s?e.jsx(we,{}):e.jsxs("div",{className:"min-h-screen bg-pnp-background",children:[e.jsxs("aside",{className:"hidden lg:fixed lg:inset-y-0 lg:left-0 lg:flex lg:w-60 lg:flex-col border-r border-pnp-border glass-nav",children:[e.jsx("div",{className:"flex items-center gap-2 px-6 h-16 border-b border-pnp-border",children:e.jsx("img",{src:"/logo.png",alt:"PNPTV",className:"h-8 w-auto"})}),e.jsx("nav",{className:"flex-1 py-4 px-3 space-y-1",children:Ne.map(a=>e.jsx(V,{to:a.to,end:a.end,className:({isActive:i})=>`block px-3 py-2 rounded-lg text-sm font-medium transition-colors ${i?"bg-pnp-accent/10 text-pnp-accent":"text-pnp-textSecondary hover:text-pnp-textPrimary hover:bg-pnp-surface"}`,children:a.label},a.to))}),e.jsx("div",{className:"p-4 border-t border-pnp-border",children:t&&e.jsxs("button",{onClick:()=>n("/profile"),className:"flex items-center gap-3 w-full px-2 py-1.5 rounded-lg hover:bg-white/5 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-pnp-accent/20 flex items-center justify-center text-pnp-accent text-sm font-bold flex-shrink-0",children:((r==null?void 0:r.displayName)||"U")[0].toUpperCase()}),e.jsx("span",{className:"text-sm text-pnp-textSecondary truncate",children:(r==null?void 0:r.displayName)||"User"})]})})]}),e.jsxs("header",{className:"lg:hidden sticky top-0 z-40 h-14 flex items-center justify-between px-4 glass-nav border-b border-pnp-border",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("img",{src:"/logo.png",alt:"PNPTV",className:"h-7 w-auto"})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>n("/profile"),className:"w-8 h-8 rounded-full bg-pnp-accent/20 flex items-center justify-center text-pnp-accent text-sm font-bold",children:((r==null?void 0:r.displayName)||"U")[0].toUpperCase()})})]}),e.jsx("main",{className:`lg:pl-60 pb-20 lg:pb-0 ${o?"pb-24":""}`,children:e.jsx(K,{})}),e.jsx("div",{className:"lg:hidden",children:e.jsx(ve,{})})]})}const _e={primary:"bg-pnp-accent text-pnp-background hover:bg-pnp-accentHover font-semibold",secondary:"bg-pnp-surface text-pnp-textPrimary hover:bg-pnp-surfaceHover border border-pnp-border",ghost:"bg-transparent text-pnp-textSecondary hover:text-pnp-textPrimary hover:bg-pnp-surface",danger:"bg-pnp-error text-white hover:opacity-90"},Se={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};function B({variant:t="primary",size:r="md",loading:s=!1,disabled:o,className:n="",children:a,...i}){return e.jsxs("button",{className:`inline-flex items-center justify-center rounded-lg transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-pnp-accent focus:ring-offset-2 focus:ring-offset-pnp-background disabled:opacity-50 disabled:cursor-not-allowed ${_e[t]} ${Se[r]} ${n}`,disabled:o||s,...i,children:[s&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),a]})}function Pe({children:t,className:r="",onClick:s,hover:o=!1}){const n=s||o;return e.jsx("div",{className:`rounded-xl bg-pnp-surface border border-pnp-border p-4 ${n?"cursor-pointer hover:bg-pnp-surfaceHover hover:border-pnp-accent/30 transition-all duration-200":""} ${r}`,onClick:s,role:s?"button":void 0,tabIndex:s?0:void 0,onKeyDown:s?a=>a.key==="Enter"&&s():void 0,children:t})}const Te=O.forwardRef(({label:t,error:r,className:s="",id:o,...n},a)=>{const i=o||(t==null?void 0:t.toLowerCase().replace(/\s+/g,"-"));return e.jsxs("div",{className:"space-y-1",children:[t&&e.jsx("label",{htmlFor:i,className:"block text-sm text-pnp-textSecondary",children:t}),e.jsx("input",{ref:a,id:i,className:`w-full rounded-lg bg-pnp-surface border border-pnp-border px-3 py-2 text-pnp-textPrimary placeholder-pnp-textSecondary focus:outline-none focus:ring-2 focus:ring-pnp-accent focus:border-transparent transition-colors ${r?"border-pnp-error":""} ${s}`,...n}),r&&e.jsx("p",{className:"text-sm text-pnp-error",children:r})]})});Te.displayName="Input";function A({className:t="",lines:r=1}){return r>1?e.jsx("div",{className:`space-y-2 ${t}`,children:Array.from({length:r}).map((s,o)=>e.jsx("div",{className:"h-4 rounded bg-pnp-surface animate-pulse",style:{width:o===r-1?"60%":"100%"}},o))}):e.jsx("div",{className:`h-4 rounded bg-pnp-surface animate-pulse ${t}`})}function Ee(){return e.jsxs("div",{className:"page-container space-y-4",children:[e.jsx(A,{className:"h-8 w-48"}),e.jsx(A,{className:"h-4 w-96"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6",children:Array.from({length:4}).map((t,r)=>e.jsx(A,{className:"h-32 rounded-xl"},r))})]})}function g({children:t}){return e.jsx(c.Suspense,{fallback:e.jsx(Ee,{}),children:t})}function N({children:t}){const{user:r,isAuthenticated:s,isLoading:o,refreshUser:n}=q(),[a,i]=c.useState("age"),[p,d]=c.useState(!1),[h,x]=c.useState(!1),[u,y]=c.useState(null);if(o||!s||!r)return e.jsx(e.Fragment,{children:t});if(r.ageVerified&&r.termsAccepted)return e.jsx(e.Fragment,{children:t});const m=!r.ageVerified,b=!r.termsAccepted,k=m&&a==="age"?"age":"terms",f=async()=>{if(p){x(!0),y(null);try{await fe(),await n(),b&&i("terms")}catch(_){y(_.message||"Failed to verify age")}finally{x(!1)}}},v=async()=>{x(!0),y(null);try{await me(),await n()}catch(_){y(_.message||"Failed to accept terms")}finally{x(!1)}};return e.jsx("div",{className:"page-container flex items-center justify-center min-h-[60vh]",children:e.jsxs(Pe,{className:"max-w-md w-full p-6",children:[k==="age"&&m?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-pnp-accent/20 flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-pnp-accent",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4.5c-.77-.833-2.694-.833-3.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h2",{className:"text-xl font-bold text-pnp-textPrimary mb-2",children:"Age Verification"}),e.jsx("p",{className:"text-sm text-pnp-textSecondary",children:"This platform contains content intended for adults. Please confirm your age to continue."})]}),e.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg bg-pnp-surface border border-pnp-border cursor-pointer hover:border-pnp-accent/50 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:p,onChange:_=>d(_.target.checked),className:"mt-0.5 w-5 h-5 rounded border-pnp-border text-pnp-accent focus:ring-pnp-accent"}),e.jsx("span",{className:"text-sm text-pnp-textPrimary",children:"I confirm that I am 18 years of age or older"})]}),u&&e.jsx("p",{className:"text-sm text-pnp-error mt-3",children:u}),e.jsx(B,{onClick:f,disabled:!p||h,className:"w-full mt-4",children:h?"Verifying...":"Confirm Age"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-pnp-accent/20 flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-pnp-accent",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h2",{className:"text-xl font-bold text-pnp-textPrimary mb-2",children:"Terms of Service"}),e.jsx("p",{className:"text-sm text-pnp-textSecondary",children:"Please review and accept our terms to continue using the platform."})]}),e.jsxs("div",{className:"max-h-48 overflow-y-auto p-3 rounded-lg bg-pnp-surface border border-pnp-border text-xs text-pnp-textSecondary space-y-2 mb-4",children:[e.jsx("p",{className:"font-medium text-pnp-textPrimary",children:"PNPTV Terms of Service"}),e.jsx("p",{children:"By using PNPTV, you agree to the following:"}),e.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[e.jsx("li",{children:"You are at least 18 years old."}),e.jsx("li",{children:"You will not share, redistribute, or record any content without explicit permission."}),e.jsx("li",{children:"You accept that all streaming content is provided as-is."}),e.jsx("li",{children:"You agree to our community guidelines and respect other users."}),e.jsx("li",{children:"Payments are non-refundable unless required by applicable law."}),e.jsx("li",{children:"We may suspend accounts that violate these terms."})]}),e.jsxs("p",{children:["For the full terms, visit"," ",e.jsx("a",{href:"https://pnptv.app/terms",target:"_blank",rel:"noopener noreferrer",className:"text-pnp-accent hover:underline",children:"pnptv.app/terms"}),". For privacy policy, visit"," ",e.jsx("a",{href:"https://pnptv.app/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-pnp-accent hover:underline",children:"pnptv.app/privacy"}),"."]})]}),u&&e.jsx("p",{className:"text-sm text-pnp-error mt-3",children:u}),e.jsx(B,{onClick:v,disabled:h,className:"w-full",children:h?"Accepting...":"Accept Terms & Continue"})]}),e.jsx("p",{className:"text-xs text-pnp-textSecondary text-center mt-4",children:k==="age"&&b?"Step 1 of 2":m?"Step 2 of 2":""})]})})}const Le=c.lazy(()=>w(()=>import("./Home-vZ90WVo1.js"),__vite__mapDeps([0,1,2,3]))),Ae=c.lazy(()=>w(()=>import("./Media-yTwWuH9b.js"),__vite__mapDeps([4,1,5,3]))),Ce=c.lazy(()=>w(()=>import("./Live-CSAafC-b.js"),__vite__mapDeps([6,1,7,5,3]))),$e=c.lazy(()=>w(()=>import("./Booking-Bl3NMbMe.js"),__vite__mapDeps([8,1,5,3,9]))),Oe=c.lazy(()=>w(()=>import("./Chat-VMJit8IR.js"),__vite__mapDeps([10,1,3]))),Re=c.lazy(()=>w(()=>import("./Social-DHbDaPQG.js"),__vite__mapDeps([11,1,2,3]))),F=c.lazy(()=>w(()=>import("./Profile-TRmtygiD.js"),__vite__mapDeps([12,1,5,3]))),Ie=c.lazy(()=>w(()=>import("./Dashboard-CjM7l6lx.js"),__vite__mapDeps([13,1,5,3]))),Ue=c.lazy(()=>w(()=>import("./AuthCallback-C6y0bpeD.js"),__vite__mapDeps([14,1,3]))),De=X([{path:"/",element:e.jsx(ke,{}),children:[{index:!0,element:e.jsx(g,{children:e.jsx(Le,{})})},{path:"media",element:e.jsx(g,{children:e.jsx(N,{children:e.jsx(Ae,{})})})},{path:"live",element:e.jsx(g,{children:e.jsx(N,{children:e.jsx(Ce,{})})})},{path:"booking",element:e.jsx(g,{children:e.jsx(N,{children:e.jsx($e,{})})})},{path:"chat",element:e.jsx(g,{children:e.jsx(N,{children:e.jsx(Oe,{})})})},{path:"social",element:e.jsx(g,{children:e.jsx(N,{children:e.jsx(Re,{})})})},{path:"profile",element:e.jsx(g,{children:e.jsx(N,{children:e.jsx(F,{})})})},{path:"profile/:userId",element:e.jsx(g,{children:e.jsx(F,{})})},{path:"admin/*",element:e.jsx(g,{children:e.jsx(Ie,{})})}]},{path:"/auth/callback",element:e.jsx(g,{children:e.jsx(Ue,{})})}]);class Me extends c.Component{constructor(r){super(r),this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,s){console.error("ErrorBoundary caught:",r,s),fetch("/api/log-error",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:r.toString(),stack:r.stack,componentStack:s.componentStack})}).catch(()=>{})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",backgroundColor:"#1C1C1E",color:"#fff",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"⚠️"}),e.jsx("h1",{style:{fontSize:"24px",marginBottom:"8px",color:"#FFB454"},children:"Something went wrong"}),e.jsx("p",{style:{marginBottom:"24px",color:"#8E8E93"},children:"We're sorry for the inconvenience. Please try refreshing the page."}),e.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"12px 24px",background:"linear-gradient(135deg, #E69138 0%, #D4007A 100%)",border:"none",borderRadius:"8px",color:"#fff",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:"Refresh Page"})]}):this.props.children}}function ze(){return e.jsx(Me,{children:e.jsx(xe,{children:e.jsx(Q,{router:De})})})}C.createRoot(document.getElementById("root")).render(e.jsx(O.StrictMode,{children:e.jsx(ze,{})}));export{nt as A,B,Pe as C,Ve as D,Te as I,A as S,Qe as T,Ge as a,qe as b,Ze as c,tt as d,et as e,Xe as f,He as g,Ke as h,lt as i,e as j,dt as k,mt as l,ft as m,ht as n,pt as o,ut as p,Ye as q,Je as r,We as s,rt as t,q as u,at as v,st as w,it as x,ct as y,ot as z};
